<!DOCTYPE HTML>
<html lang="zh-cn" prefix="og: http://ogp.me/ns#"><!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1.0; maximum-scale=3.0; width=device-width">
	<title>GL.iNet</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<script type="text/javascript" src="/js/updateurl.js"></script>
	<script type="text/javascript" src="/js/detectmobilebrowser.js"></script>
	<link rel="stylesheet" type="text/css" href="/css/gl.css?ver=20140514">
	<link rel="stylesheet" href="/css/hint.min.css">
	<script type="text/javascript" src="/js/jquery-1.11.0.min.js" ></script>
	<script type="text/javascript" src="/js/gl.js"></script>
</head>
<body>

<div class="container">
	<div class="header">
		<a href="/index.html"><img src="/images/logo.png"></a>
		<div class="div_top">
			<input type="button" class="button_nav" value="Reboot" onclick="reboot();">
			<input type="button" class="button_nav" value="Logout" onclick="logout();">			
		</div>		
		<div class="luci"><a href="/cgi-bin/luci">OpenWRT</a> - <a href="#" id="agbe">Angel Beats</a></div>		
		<script>
		var ip = location.host;		
	    var abgb = document.getElementById('agbe');
        abgb.href = "http://"+ip+":81"
        </script>
	</div>	

	<div id="div_nav" >
		<div class="div_app" style="margin-left:30px;margin-right:30px" data-url="index">
			<img src="/images/home.png">
			<label>Settings</label>
			<img src="/images/down.png" class="indicator1">
		</div>
		<div class="verticalline"></div>
		<div class="div_app" data-url="software.html">
			<img src="/images/store.png">
			<label>App repo</label>
			<img src="/images/down.png" class="indicator1">
		</div>
		<div class="verticalline"></div>
		<div class="div_app" id="div_video" data-url="video.html">
			<img src="/images/video.png"><label>Video</label>
			<img src="/images/down.png" class="indicator1">
		</div>
		<div class="div_app" id="div_download" data-url="download.html">
			<img src="/images/download.png"><label>Download</label>
			<img src="/images/down.png" class="indicator1">
		</div>
		<div class="div_app" id="div_cloud" data-url="cloud.html">
			<img src="/images/cloud.png" ><label>Cloud</label>
			<img src="/images/down.png" class="indicator1">
		</div>
		<div class="div_app" id="div_samba" data-url="samba.html">
			<img src="/images/share.png"><label>Share</label>
			<img src="/images/down.png" class="indicator1">
		</div>
		<div class="div_app" id="div_upnpd" data-url="upnpd.html">
			<img src="/images/upnpd.png"><label>UPnP server</label>
			<img src="/images/down.png" class="indicator1">
		</div>
		<div class="div_app" id="div_ssh" data-url="ssh.html">
			<img src="/images/sshproxy.png"><label>SSH Proxy</label>
			<img src="/images/down.png" class="indicator1">
		</div>
		<div class="div_app" style="display:none">
			<img src="/images/adblock.png"><label>Adblock</label>
			<img src="/images/down.png" class="indicator1">
		</div>
		<div class="div_app"  style="display:none">
			<img src="/images/bitcoin.png"><label>Cgminer</label>
			<img src="/images/down.png" class="indicator1">
		</div>
	</div>
	<div id="div_area" style="min-height:500px">
		<div id="div_settings">
			<div class="div-settings">SETTINGS</div>
			<div class="div_setting hint--right" id="div-internet"  data-hint="Internet Settings"> 
				<img src="/images/internet.png" id="img-internet">
				<div class="div_setting_value">
					<div>
						<label id="internet_ipaddr" class="label_s1">...</label>
						<label id="internet_proto" class="label_s2">...</label>
					</div>
				</div>
				<img src="/images/right.png" class="indicator">
			</div>
			<div class="div_setting  hint--right" id="div-wifi"  data-hint="Wireless Settings"> 
				<img src="/images/wifi.png" id="img-wifi">
				<div class="div_setting_value">
					<div>
						<label id="wifi_ssid" class="label_s1">...</label>
						<label id="wifi_mode" class="label_s2">...</label>
					</div>
				</div>
				<div class="status_icon onoffswitch">
					<input type="checkbox" name="wifi_status" class="onoffswitch-checkbox" id="wifi_status" checked>
					<label class="onoffswitch-label" for="wifi_status">
						<div>
							<div class="onoffswitch-inner"></div>
							<div class="onoffswitch-switch"></div>
						</div>
					</label>
				</div>
				<img src="/images/right.png" class="indicator">
			</div>
			<div class="div_setting  hint--right" id="div-port"  data-hint="Access, port, forward settings"> 
				<img src="/images/ports.png">
				<div class="div_setting_value">
					<div>
						<label id="port_status" class="label_s1">...</label>
						<label id="port_value" class="label_s2">...</label>
					</div>
				</div>
				<img src="/images/right.png" class="indicator">
			</div>
			<div class="div_setting hint--right" id="div-clients"  data-hint="Clients, connection, QoS settings"> 
				<img src="/images/clients.png">
				<div class="div_setting_value">
					<div>
						<label id="client_count" class="label_s1">0 Clients</label>
						<label id="client_names" class="label_s2">...</label>
					</div>
				</div>
				<img src="/images/right.png" class="indicator">
			</div>
			<hr style="width:100%;margin-left:0; margin-top:10px">
			<div id="div_devices">
				<div class="div_setting narrow hint--right" data-hint="Click to view device content" id="device0"> 
					<img src="/images/usb.png">
					<div class="div_setting_value narrow">
						<div>
							<label class="label_s1">...</label>
							<div class="available"><div class="usage"></div></div>
						</div>
					</div>
					<img src="/images/right.png" class="indicator">
				</div>
			</div>
			<hr style="width:100%;margin-left:0; margin-top:10px">
			<div class="div_setting hint--right" id="div-firmware"  data-hint="Firmware information and upgrade"> 
				<img src="/images/firmware.png">
				<div class="div_setting_value">
					<div>
						<label class="label_s1">Firmware</label>
						<label class="label_s2">...</label>
					</div>
				</div>
				<img src="/images/new.png" class="status_icon hide">
				<img src="/images/right.png" class="indicator">
			</div>
		</div>
		<div  id="div_main">
			
		</div>
	</div>	
	<hr>
	<div class="div_ddns">
		<span><label>DDNS</label><label id="label-ddns" class="hint--top" data-hint="Your unique domain name. You can visit from internet."><a href="http://oh01ad7.gl-inet.com">oh01ad7.gl-inet.com</a></label><label id="internet-accessible" class="hint--top" data-hint="You are not accessible from the Internet"><img src="/images/warning.png" ></label></span>
		<span><label>MAC</label><label class="hint--top" data-hint="Click to setup clone"><a href="javascript:go_clone_mac()">e4:95:6e:40:1a:d7</a></label></span>
	</div>
	<div id="div_footer">
		<a class="footer_a" href="http://www.gl-inet.com">www.gl-inet.com</a> |
		<a class="footer_a" href="http://www.gl-inet.com/docs/smartrouter/">Online manual</a> |
		<a class="footer_a" href="http://bbs.gl-inet.com">Forum</a>
		<label id="copyright">@2014 GL.iNet</label>
	</div>

	
</div>
	
<div id="modal" class="modal">
	<a id="modal-close" href="#" title="Close" class="close">X</a>
	<div id="model_content">
	</div>
</div>

<div id="div-reboot" class="modal-reboot">
	<div id="div-reboot-title">
		Rebooting
	</div>
	<div class="progress-bar"><span>0%</span></div>
</div>

<div id="overlay"></div>


</body>
<script>
$.ajaxSetup({
	cache: false
});

/*Bind event*/
$("#img-internet").click(function(){ 
	popWanSetting();
});
$("#img-wifi").click(function(){ 
	popWifiSetting();
});
$("#div-internet").click(function(){ 
	$("#div_main").load("/wan_status.html")
});
$("#div-wifi").click(function(){ 
	$("#div_main").load("/wifi_status.html")
});
$("#div-port").click(function(){ 
	$("#div_main").load("/port_status.html")
});
$("#div-firmware").click(function(){ 
	$("#div_main").load("/firmware_status.html")
});
$("#div-clients").click(function(){ 
	$("#div_main").load("/clients.html")
});

$(".div_setting").click(function(){
	$(".indicator").hide();
	$(".indicator1").hide();
	$(this).find(".indicator").show();
	$(".div_setting").removeClass("highlight");
	$(".div_app").removeClass("highlight");
	$(this).addClass("highlight");
});
$(".div_app").click(function(){
	var url=$(this).attr("data-url");
	window.location="/index.html?"+url;
});
function setup_access(){
	$('#div-port').trigger('click');
}
function check_firmware(){
	$("#div-firmware").trigger('click');
}
function change_lanip(){
	$("#div-wifi").trigger('click');
	setTimeout(function(){display_lanip()},200);
}
$("#wifi_status").click(function(e){
	e.stopPropagation();
});
$("#wifi_status").change(function(e){
	stopChecker();
	var status;
	if($(this).is(':checked'))
		status="Turn+On";
	else
		status="Turn+Off";
	var data="action=updatewifi&submit="+status;
	$.ajax({
		type: "POST",
		url: "/cgi-bin/router_cgi",
		data: data,
		dataType: 'json',
		success: function(result){
			startChecker();
		},
		error:function(data,textStatus,jqXHR){
			startChecker();
		}
	});
});

function highlight_app(url){
	var div_app=$(".div_app[data-url='"+url+"']");
	$(div_app).find(".indicator1").show();
	if(url != "index") 	$(".div_app").addClass("dim");
	$(div_app).removeClass("dim");
	$(div_app).addClass("highlight");
}

var checker;
var checker_upnp;
var query=document.URL.split('?')[1];
var page;
if((page=query.match(/[a-z0-9_]*.html/))){
	$("#div_area").load("/"+page);
	highlight_app(page);
}else{
	$("#div_main").load("/default.html")
	highlight_app("index");
	/*Run once after load*/
	getNetworkStatus();
	getDeviceStatus();
	checkUpnp();
	getClients();
	getFirmwareStatus();
	checkAvailability();
	
	startChecker();
	checker_upnp=setInterval(function(){
		checkUpnp();
		checkAvailability();
	},60000);
}

function startChecker(){
	checker=setInterval(function(){
		getNetworkStatus();
		getDeviceStatus();
		getClients();
	},5000);
}
function stopChecker(){
	window.clearInterval(checker);
}

/*Close the popup*/
$("#modal-close").click(function(){
	close_modal();
});

</script>
</html>
